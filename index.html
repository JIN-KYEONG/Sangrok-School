<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â˜• ìœ„ë“œì¸ì¹´í˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f5f5dc 0%, #d2b48c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: #4a2b1a;
            margin-bottom: 30px;
        }
        
        .header h3 {
            font-size: 1.2em;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .mode-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease;
        }
        
        .mode-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: #4a2b1a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .mode-btn.active {
            background: #FFD700;
            color: #333;
        }

        .content-area {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        .content-area.active {
            display: block;
        }

        .order-form, .order-history-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
        }

        .form-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .location-grid, .menu-grid, .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .location-item, .menu-item, .teacher-item {
            padding: 15px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            background: #f8f9fa;
        }

        .location-item:hover, .menu-item:hover, .teacher-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .location-item.selected, .menu-item.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            transform: scale(1.05);
        }
        
        .teacher-grid {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .teacher-grid.show {
            display: grid;
            animation: slideDown 0.3s ease;
        }

        .teacher-item.selected {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            border-color: transparent;
        }

        .menu-emoji {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .menu-name {
            font-size: 1.1em;
            font-weight: bold;
        }

        .menu-desc {
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0.8;
        }

        .temp-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .temp-option {
            padding: 20px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.3em;
            background: #f8f9fa;
        }

        .temp-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .temp-option.selected {
            border-color: transparent;
            transform: scale(1.05);
        }

        .temp-option.hot.selected {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
            color: white;
        }

        .temp-option.ice.selected {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a3aa 100%);
            color: white;
        }

        .temp-option.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .tumbler-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .radio-group {
            display: flex;
            gap: 15px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 1.1em;
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .radio-label:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: none;
        }
        
        .radio-label::before {
            content: '';
            width: 18px;
            height: 18px;
            border: 2px solid #ccc;
            border-radius: 50%;
            display: inline-block;
            transition: all 0.2s ease;
        }
        
        .radio-label:has(input:checked) {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .radio-label:has(input:checked)::before {
            border-color: white;
            background: white;
            box-shadow: 0 0 0 4px #667eea;
        }

        .tumbler-numbers {
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .tumbler-numbers.show {
            display: grid;
            animation: slideDown 0.3s ease;
        }

        .tumbler-num-btn {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            font-weight: bold;
            background: white;
        }

        .tumbler-num-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .tumbler-num-btn.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        
        .option-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-color: #667eea;
        }
        
        .option-item:has(input:checked) {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border-color: transparent;
        }

        .option-checkbox {
            width: 20px;
            height: 20px;
            accent-color: #48bb78;
        }

        .order-summary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .summary-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 600;
            color: #666;
        }

        .summary-value {
            font-weight: bold;
            color: #333;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-reset {
            background: #e0e0e0;
            color: #666;
        }

        .btn-reset:hover {
            background: #d0d0d0;
        }

        .order-table-container {
            overflow-x: auto;
        }

        .order-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            min-width: 600px;
        }

        .order-table th, .order-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .order-table th {
            background-color: #f2f2f2;
            font-weight: 700;
            color: #555;
        }

        .order-table tbody tr.completed {
            background-color: #e6f9ed;
            opacity: 0.7;
            text-decoration: line-through;
        }
        
        .order-table tbody tr.completed .complete-checkbox:checked {
            background-color: #38a169;
        }

        .order-table tbody tr:not(.completed):hover {
            background-color: #f9f9f9;
        }

        .complete-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            .location-grid, .menu-grid, .options-grid, .temp-options, .radio-group, .action-buttons {
                grid-template-columns: 1fr;
            }
            .tumbler-numbers {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h3>ë¶€ì²œìƒë¡í•™êµ</h3>
            <h1>â˜• ì „ê³µê³¼ ì™¸ì‹ì„œë¹„ìŠ¤2ë°˜ ì¹´í˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ</h1>
            <p>ì»¤í”¼ë¥¼ ë§Œë“­ë‹ˆë‹¤. ê¿ˆì„ ë§Œë“­ë‹ˆë‹¤.</p>
        </div>

        <div class="mode-switcher">
            <button class="mode-btn active" onclick="switchMode('order')">ğŸ›’ ì£¼ë¬¸í•˜ê¸°</button>
            <button class="mode-btn" onclick="switchMode('admin')">ğŸ“‹ ì£¼ë¬¸ í˜„í™©</button>
        </div>

        <div id="orderMode" class="content-area active">
            <div class="order-form">
                <div class="form-section">
                    <div class="section-title"><span>ğŸ“</span><span>ìœ„ì¹˜ ì„ íƒ</span></div>
                    <div class="location-grid">
                        <div class="location-item" data-location="ì „ê³µê³¼ ì—°êµ¬ì‹¤">ì „ê³µê³¼ ì—°êµ¬ì‹¤</div>
                        <div class="location-item" data-location="ì „1-1">ì „1-1</div>
                        <div class="location-item" data-location="ì „1-2">ì „1-2</div>
                        <div class="location-item" data-location="ì „1-3">ì „1-3</div>
                        <div class="location-item" data-location="ì „2-1">ì „2-1</div>
                        <div class="location-item" data-location="ì „2-2">ì „2-2</div>
                        <div class="location-item" data-location="ì „2-3">ì „2-3</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title"><span>ğŸ‘¤</span><span>ì„ ìƒë‹˜ ì„ íƒ</span></div>
                    <div id="noLocationMsg" style="text-align: center; color: #999; padding: 20px;">ë¨¼ì € ìœ„ì¹˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                    <div class="teacher-grid" id="teacherGrid"></div>
                </div>

                <div class="form-section">
                    <div class="section-title"><span>â˜•</span><span>ë©”ë‰´ ì„ íƒ</span></div>
                    <div class="menu-grid">
                        <div class="menu-item" data-menu="ì•„ë©”ë¦¬ì¹´ë…¸"><div class="menu-emoji">â˜•</div><div class="menu-name">ì•„ë©”ë¦¬ì¹´ë…¸</div></div>
                        <div class="menu-item" data-menu="ì¹´í˜ë¼ë–¼"><div class="menu-emoji">ğŸ¥›</div><div class="menu-name">ì¹´í˜ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ë°”ë‹ë¼ ë¼ë–¼"><div class="menu-emoji">ğŸ¦</div><div class="menu-name">ë°”ë‹ë¼ ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ì•„ìƒ·ì¶”"><div class="menu-emoji">ğŸ’ª</div><div class="menu-name">ì•„ìƒ·ì¶”</div><div class="menu-desc">(ì•„ì´ìŠ¤í‹°+ìƒ·)</div></div>
                        <div class="menu-item" data-menu="ì´ˆì½”ë¼ë–¼"><div class="menu-emoji">ğŸ«</div><div class="menu-name">ì´ˆì½”ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ë§ì°¨ë¼ë–¼"><div class="menu-emoji">ğŸµ</div><div class="menu-name">ë§ì°¨ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ë°€í¬í‹°ë¼ë–¼"><div class="menu-emoji">ğŸ§‹</div><div class="menu-name">ë°€í¬í‹°ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ìš”ê±°íŠ¸ë¼ë–¼"><div class="menu-emoji">ğŸ¦</div><div class="menu-name">ìš”ê±°íŠ¸ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ê²€ì •ì½©ë¼ë–¼"><div class="menu-emoji">ğŸ¥œ</div><div class="menu-name">ê²€ì •ì½©ë¼ë–¼</div></div>
                        <div class="menu-item" data-menu="ë³µìˆ­ì•„ ì•„ì´ìŠ¤í‹°"><div class="menu-emoji">ğŸ‘</div><div class="menu-name">ë³µìˆ­ì•„ ì•„ì´ìŠ¤í‹°</div></div>
                        <div class="menu-item" data-menu="ë ˆëª¬ ì•„ì´ìŠ¤í‹°"><div class="menu-emoji">ğŸ‹</div><div class="menu-name">ë ˆëª¬ ì•„ì´ìŠ¤í‹°</div></div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title"><span>ğŸŒ¡ï¸</span><span>HOT / ICE ì„ íƒ</span></div>
                    <div class="temp-options">
                        <div class="temp-option hot" data-temp="HOT">ğŸ”¥ HOT</div>
                        <div class="temp-option ice" data-temp="ICE">ğŸ§Š ICE</div>
                    </div>
                    <div id="tempWarning" style="color: #ff6b6b; margin-top: 10px; display: none; font-weight: bold; text-align: center;"></div>
                </div>

                <div class="form-section">
                    <div class="section-title"><span>ğŸ¥¤</span><span>ì»µ ì„ íƒ</span></div>
                    <div class="tumbler-section">
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="tumbler" value="ë‹¤íšŒìš© ì»µ" checked>
                                <span class="radio-text">ë‹¤íšŒìš© ì»µ</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="tumbler" value="ê°œì¸ í…€ë¸”ëŸ¬">
                                <span class="radio-text">ê°œì¸ í…€ë¸”ëŸ¬</span>
                            </label>
                        </div>
                        <div class="tumbler-numbers" id="tumblerNumbers">
                            <div class="tumbler-num-btn" data-number="1">1ë²ˆ</div>
                            <div class="tumbler-num-btn" data-number="2">2ë²ˆ</div>
                            <div class="tumbler-num-btn" data-number="3">3ë²ˆ</div>
                            <div class="tumbler-num-btn" data-number="4">4ë²ˆ</div>
                            <div class="tumbler-num-btn" data-number="5">5ë²ˆ</div>
                            <div class="tumbler-num-btn" data-number="6">6ë²ˆ</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title"><span>ğŸ“</span><span>ê¸°íƒ€ì‚¬í•­</span></div>
                    <div class="options-grid">
                        <label class="option-item"><input type="checkbox" class="option-checkbox" value="ìƒ·ì¶”ê°€"><span>ìƒ·ì¶”ê°€</span></label>
                        <label class="option-item"><input type="checkbox" class="option-checkbox" value="ì‹œëŸ½ì¶”ê°€"><span>ì‹œëŸ½ì¶”ê°€</span></label>
                        <label class="option-item"><input type="checkbox" class="option-checkbox" value="ì—°í•˜ê²Œ"><span>ì—°í•˜ê²Œ</span></label>
                        <label class="option-item"><input type="checkbox" class="option-checkbox" value="ì–¼ìŒ ë§ì´"><span>ì–¼ìŒ ë§ì´</span></label>
                    </div>
                </div>

                <div class="order-summary">
                    <div class="summary-title">âœ”ï¸ ì£¼ë¬¸ í™•ì¸</div>
                    <div class="summary-item"><div class="summary-label">ìœ„ì¹˜/ì„ ìƒë‹˜:</div><div class="summary-value" id="summaryLocationTeacher">ì„ íƒ ì•ˆ í•¨</div></div>
                    <div class="summary-item"><div class="summary-label">ë©”ë‰´:</div><div class="summary-value" id="summaryMenu">ì„ íƒ ì•ˆ í•¨</div></div>
                    <div class="summary-item"><div class="summary-label">ì˜¨ë„:</div><div class="summary-value" id="summaryTemp">ì„ íƒ ì•ˆ í•¨</div></div>
                    <div class="summary-item"><div class="summary-label">ì»µ:</div><div class="summary-value" id="summaryTumbler">ë‹¤íšŒìš© ì»µ</div></div>
                    <div class="summary-item"><div class="summary-label">ê¸°íƒ€ì‚¬í•­:</div><div class="summary-value" id="summaryOptions">ì„ íƒ ì•ˆ í•¨</div></div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-submit" onclick="submitOrder()">ì£¼ë¬¸í•˜ê¸°</button>
                    <button class="btn btn-reset" onclick="resetForm()">ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>
        
        <div id="adminMode" class="content-area">
            <div class="order-history-section">
                <h2>ğŸ“‹ ì£¼ë¬¸ í˜„í™©</h2>
                <div class="order-table-container">
                    <table class="order-table">
                        <thead>
                            <tr>
                                <th>ìˆœë²ˆ</th>
                                <th>ìœ„ì¹˜/ì„ ìƒë‹˜</th>
                                <th>ë©”ë‰´</th>
                                <th>ì˜¨ë„</th>
                                <th>ì»µ</th>
                                <th>ê¸°íƒ€ì‚¬í•­</th>
                                <th>ì œì¡° ì™„ë£Œ</th>
                            </tr>
                        </thead>
                        <tbody id="orderList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const teachersByLocation = {
            'ì „ê³µê³¼ ì—°êµ¬ì‹¤': ['ê°•ì§„ê²½ ì„ ìƒë‹˜', 'ë°•ë¯¼ì•„ ì„ ìƒë‹˜', 'ì´í–¥ìš± ì„ ìƒë‹˜', 'ë°•ì•„ë¦„ ì„ ìƒë‹˜', 'ìµœí–¥ë¯¸ ì„ ìƒë‹˜', 'ì‹ ì°½í˜¸ ì„ ìƒë‹˜', 'ë¥˜ì—¬ì§„ ì„ ìƒë‹˜'],
            'ì „1-1': ['ì´ë¯¸ì • ì„ ìƒë‹˜'],
            'ì „1-2': ['ì´ì€ê²½ ì„ ìƒë‹˜'],
            'ì „1-3': ['ì„ í˜œì› ì„ ìƒë‹˜'],
            'ì „2-1': ['ê¹€ì€ì • ì„ ìƒë‹˜'],
            'ì „2-2': ['ë‚˜ë¯¸í¬ ì„ ìƒë‹˜'],
            'ì „2-3': ['ì§„ë¯¼ì • ì„ ìƒë‹˜']
        };

        let selected = {
            location: null,
            teacher: null,
            menu: null,
            temp: null,
            cup: 'ë‹¤íšŒìš© ì»µ',
            tumblerNumber: null,
            options: []
        };
        let orders = [];

        const locationItems = document.querySelectorAll('.location-item');
        const teacherGrid = document.getElementById('teacherGrid');
        const noLocationMsg = document.getElementById('noLocationMsg');
        const menuItems = document.querySelectorAll('.menu-item');
        const tempOptions = document.querySelectorAll('.temp-option');
        const tempWarning = document.getElementById('tempWarning');
        const cupRadios = document.querySelectorAll('input[name="tumbler"]');
        const tumblerNumbers = document.getElementById('tumblerNumbers');
        const tumblerNumBtns = document.querySelectorAll('.tumbler-num-btn');
        const optionCheckboxes = document.querySelectorAll('.option-checkbox');

        const summaryLocationTeacher = document.getElementById('summaryLocationTeacher');
        const summaryMenu = document.getElementById('summaryMenu');
        const summaryTemp = document.getElementById('summaryTemp');
        const summaryTumbler = document.getElementById('summaryTumbler');
        const summaryOptions = document.getElementById('summaryOptions');
        const orderList = document.getElementById('orderList');
        
        function switchMode(mode) {
            const allModes = document.querySelectorAll('.content-area');
            const allBtns = document.querySelectorAll('.mode-btn');

            allModes.forEach(el => el.classList.remove('active'));
            allBtns.forEach(el => el.classList.remove('active'));

            if (mode === 'order') {
                document.getElementById('orderMode').classList.add('active');
                document.querySelector('.mode-btn:nth-child(1)').classList.add('active');
            } else if (mode === 'admin') {
                document.getElementById('adminMode').classList.add('active');
                document.querySelector('.mode-btn:nth-child(2)').classList.add('active');
                renderAdminTable();
            }
        }
        
        function updateSummary() {
            summaryLocationTeacher.textContent = selected.location && selected.teacher
                ? `${selected.location} / ${selected.teacher}`
                : 'ì„ íƒ ì•ˆ í•¨';
            summaryMenu.textContent = selected.menu || 'ì„ íƒ ì•ˆ í•¨';
            summaryTemp.textContent = selected.temp || 'ì„ íƒ ì•ˆ í•¨';
            
            if (selected.cup === 'ê°œì¸ í…€ë¸”ëŸ¬') {
                summaryTumbler.textContent = `ê°œì¸ í…€ë¸”ëŸ¬ (${selected.tumblerNumber || 'ë²ˆí˜¸ ë¯¸ì„ íƒ'})`;
            } else {
                summaryTumbler.textContent = 'ë‹¤íšŒìš© ì»µ';
            }

            summaryOptions.textContent = selected.options.length > 0
                ? selected.options.join(', ')
                : 'ì„ íƒ ì•ˆ í•¨';
        }

        function resetForm() {
            Object.keys(selected).forEach(key => selected[key] = null);
            selected.cup = 'ë‹¤íšŒìš© ì»µ';
            selected.options = [];

            document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
            document.querySelector('input[name="tumbler"][value="ë‹¤íšŒìš© ì»µ"]').checked = true;
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
            
            teacherGrid.classList.remove('show');
            teacherGrid.innerHTML = '';
            noLocationMsg.style.display = 'block';

            tumblerNumbers.classList.remove('show');
            tempOptions.forEach(option => option.classList.remove('disabled'));
            tempWarning.style.display = 'none';

            updateSummary();
        }

        function createTeacherButtons(location) {
            teacherGrid.innerHTML = '';
            const teachers = teachersByLocation[location];
            if (teachers && teachers.length > 0) {
                teachers.forEach(teacher => {
                    const btn = document.createElement('div');
                    btn.classList.add('teacher-item');
                    btn.textContent = teacher;
                    btn.setAttribute('data-teacher', teacher);
                    teacherGrid.appendChild(btn);

                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.teacher-item').forEach(el => el.classList.remove('selected'));
                        btn.classList.add('selected');
                        selected.teacher = teacher;
                        updateSummary();
                    });
                });
            } else {
                teacherGrid.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">ì„ ìƒë‹˜ ëª…ë‹¨ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
            }
        }

        locationItems.forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.location-item').forEach(el => el.classList.remove('selected'));
                item.classList.add('selected');
                selected.location = item.dataset.location;
                selected.teacher = null;
                
                noLocationMsg.style.display = 'none';
                teacherGrid.classList.add('show');
                createTeacherButtons(selected.location);
                updateSummary();
            });
        });

        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('selected'));
                item.classList.add('selected');
                selected.menu = item.dataset.menu;

                tempOptions.forEach(option => option.classList.remove('selected', 'disabled'));
                tempWarning.style.display = 'none';
                selected.temp = null;

                const iceOnlyMenus = ['ì•„ìƒ·ì¶”', 'ë³µìˆ­ì•„ ì•„ì´ìŠ¤í‹°', 'ë ˆëª¬ ì•„ì´ìŠ¤í‹°'];
                if (iceOnlyMenus.includes(selected.menu)) {
                    tempOptions[0].classList.add('disabled');
                    tempOptions[1].click();
                    tempWarning.textContent = 'âš ï¸ ' + selected.menu + 'ëŠ” ICEë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤!';
                    tempWarning.style.display = 'block';
                }

                updateSummary();
            });
        });

        tempOptions.forEach(item => {
            item.addEventListener('click', () => {
                if (item.classList.contains('disabled')) return;
                tempOptions.forEach(el => el.classList.remove('selected'));
                item.classList.add('selected');
                selected.temp = item.dataset.temp;
                updateSummary();
            });
        });

        cupRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                selected.cup = radio.value;
                if (selected.cup === 'ê°œì¸ í…€ë¸”ëŸ¬') {
                    tumblerNumbers.classList.add('show');
                } else {
                    tumblerNumbers.classList.remove('show');
                    selected.tumblerNumber = null;
                    document.querySelectorAll('.tumbler-num-btn').forEach(btn => btn.classList.remove('selected'));
                }
                updateSummary();
            });
        });

        tumblerNumBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                tumblerNumBtns.forEach(el => el.classList.remove('selected'));
                btn.classList.add('selected');
                selected.tumblerNumber = btn.dataset.number;
                updateSummary();
            });
        });
        
        optionCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                selected.options = Array.from(optionCheckboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.value);
                updateSummary();
            });
        });
        
        function submitOrder() {
            if (!selected.location || !selected.teacher || !selected.menu || !selected.temp) {
                alert('ìœ„ì¹˜, ì„ ìƒë‹˜, ë©”ë‰´, ì˜¨ë„ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (selected.cup === 'ê°œì¸ í…€ë¸”ëŸ¬' && !selected.tumblerNumber) {
                alert('í…€ë¸”ëŸ¬ ë²ˆí˜¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const confirmMsg = `ì£¼ë¬¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
- ìœ„ì¹˜/ì„ ìƒë‹˜: ${selected.location} / ${selected.teacher}
- ë©”ë‰´: ${selected.menu}
- ì˜¨ë„: ${selected.temp}
- ì»µ: ${selected.cup}${selected.cup === 'ê°œì¸ í…€ë¸”ëŸ¬' ? ' (' + selected.tumblerNumber + 'ë²ˆ)' : ''}
- ê¸°íƒ€ì‚¬í•­: ${selected.options.length > 0 ? selected.options.join(', ') : 'ì—†ìŒ'}`;

            if (confirm(confirmMsg)) {
                const newOrder = {
                    id: Date.now(),
                    location: selected.location,
                    teacher: selected.teacher,
                    menu: selected.menu,
                    temp: selected.temp,
                    cup: selected.cup,
                    tumblerNumber: selected.tumblerNumber,
                    options: selected.options,
                    isCompleted: false
                };
                orders.unshift(newOrder); // Add to the beginning of the array
                alert('ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                resetForm();
                renderAdminTable();
            }
        }
        
        function renderAdminTable() {
            orderList.innerHTML = '';
            orders.forEach((order, index) => {
                const row = document.createElement('tr');
                if (order.isCompleted) {
                    row.classList.add('completed');
                }
                row.innerHTML = `
                    <td>${orders.length - index}</td>
                    <td>${order.location} / ${order.teacher}</td>
                    <td>${order.menu}</td>
                    <td>${order.temp}</td>
                    <td>${order.cup === 'ê°œì¸ í…€ë¸”ëŸ¬' ? `ê°œì¸ í…€ë¸”ëŸ¬ (${order.tumblerNumber}ë²ˆ)` : 'ë‹¤íšŒìš© ì»µ'}</td>
                    <td>${order.options.length > 0 ? order.options.join(', ') : '-'}</td>
                    <td>
                        <input type="checkbox" class="complete-checkbox" data-order-id="${order.id}" ${order.isCompleted ? 'checked' : ''}>
                    </td>
                `;
                orderList.appendChild(row);
            });

            // Add event listeners for the new checkboxes
            document.querySelectorAll('.complete-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const orderId = parseInt(e.target.dataset.orderId);
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.isCompleted = e.target.checked;
                        renderAdminTable(); // Re-render the table to reflect changes
                    }
                });
            });
        }
    </script>
</body>
</html>
